<!DOCTYPE HTML>
<html lang="en-US">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <style type="text/css">
        body,
        div,
        dl,
        dt,
        dd,
        ul,
        ol,
        li,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        pre,
        form,
        fieldset,
        input,
        textarea,
        p,
        blockquote,
        th,
        td {
            margin: 0;
            padding: 0;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0;
        }

        fieldset,
        img {
            border: 0;
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        strong,
        th,
        var {
            font-style: normal;
            font-weight: normal;
        }

        ol,
        ul {
            list-style: none;
        }

        caption,
        th {
            text-align: left;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-size: 100%;
            font-weight: bold;
        }

        q:before,
        q:after {
            content: '';
        }

        abbr,
        acronym {
            border: 0;
        }

        body,
        html {
            height: 100%;
            width: 100%;
        }

        /* Common 定义基本样式 */
        body {
            font: 12px/1.8 'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, Sans-serif;
            padding: 0;
            margin: 0;
            color: #333333;
        }

        #map {
            height: 100%;
            width: 100%;
        }

        #loading {
            height: 100%;
            width: 100%;
            position: absolute;
            z-index: 999;
            background: url("./images/site/loading.gif") no-repeat center center #FFFAD1;
            top: 0;
            left: 0;
            text-align: center;
            line-height: 300px;
            font-size: 32px;
            color: #666;
        }

        #theEnd {
            height: 0%;
            width: 100%;
            line-height: 0;
            font-size: 0;
            overflow: hidden;
            position: absolute;
            z-index: 999;
            background-color: #FFFAD1;
            top: 0;
            left: 0;
        }

        #theEndText {
            position: absolute;
            left: 0;
            z-index: 9999;
            width: 100%;
            text-align: center;
            font-size: 26px;
            line-height: 2;
            top: 50%;
            margin-top: -100px;
            height: 200px;
        }
    </style>
</head>

<body>
    <div id="loading">正在加载...</div>
    <div id="theEnd"></div>
    <div id="map"></div>

    <!-- 指定全局的分享内容 -->
    <input id="wsContent" type="hidden" value="">
    <!-- 指定全局的分享链接 -->
    <input id="wsUrl" type="hidden" value="待补充">
    <!-- 指定全局的分享图片 -->
    <input id="wsPic" type="hidden" value="./social.png">

    <script type="text/javascript" src="./jquery.min.js"></script>
    <script type="text/javascript" src="./jquery.wshare.js"></script>
    <script type="text/javascript" src="./sm/soundmanager2-nodebug-jsmin.js"></script>
    <script type="text/javascript">
        (function (a, b) { "use strict"; var c = function () { var a = [["requestFullscreen", "exitFullscreen", "fullscreenchange", "fullscreen", "fullscreenElement"], ["webkitRequestFullScreen", "webkitCancelFullScreen", "webkitfullscreenchange", "webkitIsFullScreen", "webkitCurrentFullScreenElement"], ["mozRequestFullScreen", "mozCancelFullScreen", "mozfullscreenchange", "mozFullScreen", "mozFullScreenElement"]]; for (var c = 0, d = a.length; c < d; c++) { var e = a[c]; if (e[1] in b) return e } }(); if (!c) return a.screenfull = !1; var d = "ALLOW_KEYBOARD_INPUT" in Element, e = { init: function () { return b.addEventListener(c[2], function (a) { e.isFullscreen = b[c[3]], e.element = b[c[4]], e.onchange(a) }), this }, isFullscreen: b[c[3]], element: b[c[4]], request: function (a) { a = a || b.documentElement; try { var options = d ? { keyboard: true } : undefined; if (typeof a[c[0]] === 'function') { a[c[0]](options); } } catch (e) { console.warn('Fullscreen request failed:', e); } }, exit: function () { b[c[1]]() }, toggle: function (a) { this.isFullscreen ? this.exit() : this.request(a) }, onchange: function () { } }; a.screenfull = e.init() })(window, document)
    </script>
    <script type="text/javascript" src="./config/config.js"></script>
    <script type="text/javascript" src="./config/marker.js"></script>
    <script type="text/javascript">
        // 从配置文件中获取地图中心点和其他位置信息
        var MP_CEN = config.mapCenter;
        var CN_CEN = config.chinaCenter;
        var DEAR_LOCATION = config.mainLocations.dearLocation;
        var TWO_MIDDLE_LOCATION = config.mainLocations.towMiddleLocation;
        var GD_GZS = config.mainLocations.guangzhou;
       
        // 背景音乐
        var MUSIC;

        /**
         * 地图缩放动画函数
         * @param {number} zoom - 目标缩放级别
         * @param {number} time - 每次缩放的时间间隔(ms)，默认1000ms
         * @param {Function} callback - 缩放完成后的回调函数
         * @param {BMap.Point} point - 可选，缩放时的中心点
         */
        function zoomTo(zoom, time, callback, point) {
            var time = time || 1000;
            var callback = callback || function () { };
            var loop = '';
            function loopZoom() {
                var curZoom = map.getZoom();
                if (curZoom == zoom) {
                    clearTimeout(loop);
                    callback();
                    return false;
                }
                var plus = curZoom > zoom ? -1 : 1;
                var toZoom = curZoom + plus;
                map.setZoom(toZoom);
                if (point) {
                    map.setCenter(point);
                }
                var center = map.getCenter();
                loop = setTimeout(loopZoom, time);
            }
            loopZoom();
        }

        /**
         * 循环显示信息窗口
         * @param {Array} loopList - 需要显示的信息窗口列表
         * @param {number} time - 显示时间间隔
         * @param {Function} callback - 全部显示完成后的回调函数
         */
        function loopWin(loopList, time, callback) {
            var i = 0;
            var len = loopList.length;
            var callback = callback || function () { };
            var timeout = '';

            function loopWinInner() {
                if (i == len) {
                    clearTimeout(timeout);
                    setTimeout(callback, 1000);
                    return false;
                }

                var opts = {
                    title: loopList[i].title,
                    maxWidth: 600,
                    height: 0
                }
                var content = loopList[i].content;
                if (loopList[i].image) {
                    content = `<img src="${loopList[i].image.path}" width="${loopList[i].image.width}" height="${loopList[i].image.height}" alt="${loopList[i].title || ''}" />`;
                }
                var infoWindow = new BMap.InfoWindow(content, opts);
                map.openInfoWindow(infoWindow, new BMap.Point(loopList[i].point.lng, loopList[i].point.lat));
                infoWindow.redraw();
                i++;
                if (loopList[i]) {
                    var time = loopList[i].timeout || 2000;
                } else {
                    var time = 2000;
                }
                timeout = setTimeout(loopWinInner, time);
            }

            loopWinInner();
        }

        // 广外艺
        function panZoom_GTC() {
            try {
                // 检查配置
                if (!config.mainLocations.authorLocation || !config.mainLocations.authorLocation.point) {
                    throw new Error('缺少作者位置配置');
                }
                
                map.panTo(new BMap.Point(config.mainLocations.authorLocation.point.lng, config.mainLocations.authorLocation.point.lat));
                setTimeout(function () {
                    try {
                        zoomTo(18, 800, function () {
                            try {
                                var marker = new BMap.Marker(config.mainLocations.authorLocation.point);
                                map.addOverlay(marker);
                                marker.setAnimation(BMAP_ANIMATION_BOUNCE);
                                setTimeout(panZoom_JYU, 1000);
                            } catch (error) {
                                alert('错误：' + error.message);
                            }
                        }, config.mainLocations.authorLocation.point);
                    } catch (error) {
                        alert('错误：' + error.message);
                    }
                }, 800);
            } catch (error) {
                alert('错误：' + error.message);
            }
        }

        // 嘉应学院
        function panZoom_JYU() {
            try {
                // 检查配置
                if (!DEAR_LOCATION || !DEAR_LOCATION.point) {
                    throw new Error('缺少对方位置配置');
                }
                
                zoomTo(8, 1000, function () {
                    try {
                        map.panTo(new BMap.Point(DEAR_LOCATION.point.lng, DEAR_LOCATION.point.lat));
                        setTimeout(function () {
                            try {
                                zoomTo(16, 800, function () {
                                    try {
                                        var marker = new BMap.Marker(DEAR_LOCATION.point);
                                        map.addOverlay(marker);
                                        marker.setAnimation(BMAP_ANIMATION_BOUNCE);
                                        setTimeout(panZoom_HEY, 1000);
                                    } catch (error) {
                                        alert('错误：' + error.message);
                                    }
                                });
                            } catch (error) {
                                alert('错误：' + error.message);
                            }
                        }, 1000);
                    } catch (error) {
                        alert('错误：' + error.message);
                    }
                });
            } catch (error) {
                alert('错误：' + error.message);
            }
        }

        // 河源市
        function panZoom_HEY() {
            try {
                // 检查配置
                if (!config.mainLocations.towMiddleLocation || !config.mainLocations.towMiddleLocation.point) {
                    throw new Error('缺少中间位置配置');
                }
                
                if (!DEAR_LOCATION || !DEAR_LOCATION.point) {
                    throw new Error('缺少对方位置配置');
                }
                
                if (!config.mainLocations.authorLocation || !config.mainLocations.authorLocation.point) {
                    throw new Error('缺少作者位置配置');
                }
                
                zoomTo(9, 1000, function () {
                    try {
                        map.panTo(new BMap.Point(config.mainLocations.towMiddleLocation.point.lng, config.mainLocations.towMiddleLocation.point.lat));
                        setTimeout(function () {
                            try {
                                // 嘉应 和 广州 之间的路线
                                var start = new BMap.Point(DEAR_LOCATION.point.lng, DEAR_LOCATION.point.lat);
                                var end = new BMap.Point(config.mainLocations.authorLocation.point.lng, config.mainLocations.authorLocation.point.lat);
                                var driving2 = new BMap.DrivingRoute(map, { renderOptions: { map: map, autoViewport: false } });
                                driving2.search(start, end);
                                setTimeout(function () {
                                    try {
                                        if (!config.routeInfo) {
                                            throw new Error('缺少路线信息配置');
                                        }
                                        loopWin(config.routeInfo, 2000, showPhotos);
                                    } catch (error) {
                                        alert('错误：' + error.message);
                                    }
                                }, 2000);
                            } catch (error) {
                                alert('错误：' + error.message);
                            }
                        }, 1000);
                    } catch (error) {
                        alert('错误：' + error.message);
                    }
                });
            } catch (error) {
                alert('错误：' + error.message);
            }
        }

        // 展示游历图片信息
        function showPhotos() {
            try {
                map.clearOverlays();
                
                // 检查 GD_GZS 配置
                if (!GD_GZS || !GD_GZS.lng || !GD_GZS.lat) {
                    throw new Error('缺少广州位置配置');
                }
                
                map.panTo(new BMap.Point(GD_GZS.lng, GD_GZS.lat));
                setTimeout(function () {
                    try {
                        zoomTo(13, 1000, function () {
                            try {
                                if (!config.photos) {
                                    throw new Error('缺少照片配置');
                                }
                                loopWin(config.photos, 2500, wannaTo);
                            } catch (error) {
                                alert('错误：' + error.message);
                            }
                        });
                    } catch (error) {
                        alert('错误：' + error.message);
                    }
                }, 1000);
            } catch (error) {
                alert('错误：' + error.message);
            }
        }

        // 展示想去的地方
        function wannaTo() {
            try {
                map.closeInfoWindow();
                zoomTo(5, 1000, function () {
                    try {
                        if (!CN_CEN || !CN_CEN.lng || !CN_CEN.lat) {
                            throw new Error('缺少中国中心配置');
                        }
                        
                        map.panTo(new BMap.Point(CN_CEN.lng, CN_CEN.lat));
                        map.setMapType(BMAP_HYBRID_MAP);
                        setTimeout(function () {
                            try {
                                if (!config.wannaToLocations) {
                                    throw new Error('缺少想去的地方配置');
                                }
                                loopWin(config.wannaToLocations.map(item => ({
                                    ...item,
                                    point: item.point === 'chinaCenter' ? CN_CEN : item.point
                                })), 1000, showMarkerText);
                            } catch (error) {
                                alert('错误：' + error.message);
                            }
                        }, 1000);
                    } catch (error) {
                        alert('错误：' + error.message);
                    }
                });
            } catch (error) {
                alert('错误：' + error.message);
            }
        }

        var markerText = [];
        try {
            markerText = markerConfig.markerText || [];
        } catch (error) {
            alert('错误：缺少 markerConfig 配置');
        }
        
        function addMarker(lng, lat) {
            try {
                var marker = new BMap.Marker(new BMap.Point(lng, lat));
                marker.setAnimation(BMAP_ANIMATION_DROP);
                map.addOverlay(marker);
            } catch (error) {
                alert('错误：' + error.message);
            }
        }
        
        if (!Array.prototype.shuffle) {
            Array.prototype.shuffle = function () {
                for (var j, x, i = this.length; i; j = parseInt(Math.random() * i), x = this[--i], this[i] = this[j], this[j] = x);
                return this;
            };
        }
        
        try {
            markerText.shuffle();
        } catch (error) {
            alert('错误：' + error.message);
        }
        
        function loopAddMarker(markers, callback) {
            try {
                var i = 0;
                var len = markers.length;
                var callback = callback || function () { };
                var loop = '';
                function loopAddMarkerInner() {
                    if (i == len) {
                        clearTimeout(loop);
                        callback();
                        return false;
                    }
                    addMarker(markers[i].lng, markers[i].lat);
                    i++;
                    loop = setTimeout(loopAddMarkerInner, 300);
                }
                loopAddMarkerInner();
            } catch (error) {
                alert('错误：' + error.message);
            }
        }

        function showMarkerText() {
            try {
                map.closeInfoWindow();
                map.panTo(new BMap.Point(82.699584, 39.8202));
                setTimeout(function () {
                    try {
                        zoomTo(9, 1000, function () {
                            try {
                                loopAddMarker(markerText, function () {
                                    try {
                                        setTimeout(function () {
                                            try {
                                                slideDown('theEnd', 1000, function () {
                                                    try {
                                                        if (!config.common || !config.common.dearName || !config.common.authorName) {
                                                            throw new Error('缺少通用配置');
                                                        }
                                                        var theEndText = '<div id="theEndText">致心爱的' + config.common.dearName  + ' :) --by ' + config.common.authorName + '<br />' +
                                                            '<button data-toggle="wshare" data-type="weibo">分享到微博</button>' +
                                                            '<button onclick="window.location.reload();">再看一次</button></div>';
                                                        document.getElementById('theEnd').innerHTML = theEndText;
                                                    } catch (error) {
                                                        alert('错误：' + error.message);
                                                    }
                                                });
                                            } catch (error) {
                                                alert('错误：' + error.message);
                                            }
                                        }, 5000);
                                    } catch (error) {
                                        alert('错误：' + error.message);
                                    }
                                });
                            } catch (error) {
                                alert('错误：' + error.message);
                            }
                        });
                    } catch (error) {
                        alert('错误：' + error.message);
                    }
                }, 1000);
            } catch (error) {
                alert('错误：' + error.message);
            }
        }

        function slideDown(id, speed, callback) {
            var object = document.getElementById(id);
            var timeout = speed * 0.001;
            var callback = callback || function () { };
            var loop = '';
            object.style.display = 'block';
            object.style.height = '0%';
            function slideDownInner() {
                var curHeight = parseFloat(object.style.height) || 0;
                if (curHeight >= 100) {
                    clearTimeout(loop);
                    callback();
                    return false;
                }
                object.style.height = (curHeight + 0.1) + '%';
                loop = setTimeout(slideDownInner, timeout);
            }
            slideDownInner();
        }

        function getImageDimensions(imgPath) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.onload = function () {
                    resolve({
                        width: this.width,
                        height: this.height
                    });
                };
                img.onerror = reject;
                img.src = imgPath;
            });
        }

        async function preLoadImages(callback) {
            var imglist = [];
            // 从routeInfo中提取图片路径
            config.routeInfo.forEach(function (photo) {
                if (photo.image && photo.image.path) {
                    imglist.push(photo.image.path);
                }
            });
            // 从photos中提取图片路径
            config.photos.forEach(function (photo) {
                if (photo.image && photo.image.path) {
                    imglist.push(photo.image.path);
                }
            });
            // 从wannaToLocations中提取图片路径
            config.wannaToLocations.forEach(function (location) {
                if (location.image && location.image.path) {
                    imglist.push(location.image.path);
                }
            });
            try {
                // 遍历所有图片路径
                for (let i = 0; i < imglist.length; i++) {
                    const dimensions = await getImageDimensions(imglist[i]);
                    // 更新config中对应图片的尺寸
                    updateConfigImageDimensions(imglist[i], dimensions);
                }
                callback && callback();
            } catch (error) {
                console.error('Error loading images:', error);
                callback && callback();
            }
        }

        function updateConfigImageDimensions(imgPath, dimensions) {
            // 更新routeInfo中的图片尺寸
            config.routeInfo.forEach(item => {
                if (item.image && item.image.path === imgPath) {
                    item.image.width = dimensions.width;
                    item.image.height = dimensions.height;
                }
            });

            // 更新photos中的图片尺寸
            config.photos.forEach(item => {
                if (item.image && item.image.path === imgPath) {
                    item.image.width = dimensions.width;
                    item.image.height = dimensions.height;
                }
            });

            // 更新wannaToLocations中的图片尺寸
            config.wannaToLocations.forEach(item => {
                if (item.image && item.image.path === imgPath) {
                    item.image.width = dimensions.width;
                    item.image.height = dimensions.height;
                }
            });
        }

        var map;

        // 百度地图初始化
        function initMap() {
            try {
                map = new BMap.Map("map");
                var point = new BMap.Point(MP_CEN.lng, MP_CEN.lat);
                map.centerAndZoom(point, 4);
                map.disableDragging();
                map.disableDoubleClickZoom();

                // 创建地址解析器实例
                var myGeo = new BMap.Geocoder();

                // 解析所有包含address的点位
                function geocodeAddress(item) {
                    return new Promise((resolve, reject) => {
                        if (item.address && (!item.point || (typeof item.point === 'string'))) {
                            myGeo.getPoint(item.address, function (point) {
                                console.log("地址解析结果: ", point);
                                if (point) {
                                    item.point = point;
                                    resolve(item);
                                } else {
                                    console.error("无法解析地址: " + item.address);
                                    resolve(item);
                                }
                            });
                        } else {
                            resolve(item);
                        }
                    });
                }

                // 处理所有需要地址解析的配置
                async function processAddresses() {
                    try {
                        // 处理路线信息中的地址
                        for (let i = 0; i < config.routeInfo.length; i++) {
                            if (typeof config.routeInfo[i].point === 'string') {
                                const location = config.mainLocations[config.routeInfo[i].point];
                                if (location) {
                                    config.routeInfo[i].point = { lng: location.lng, lat: location.lat };
                                }
                            }
                        }
                        // 处理地址
                        for (let i = 0; i < config.routeInfo.length; i++) {
                            await geocodeAddress(config.routeInfo[i]);
                        }
                        // 处理照片展示中的地址
                        for (let i = 0; i < config.photos.length; i++) {
                            await geocodeAddress(config.photos[i]);
                        }

                        // 处理想去的地方中的地址
                        for (let i = 0; i < config.wannaToLocations.length; i++) {
                            if (config.wannaToLocations[i].point === 'chinaCenter') {
                                config.wannaToLocations[i].point = { lng: CN_CEN.lng, lat: CN_CEN.lat };
                            } else {
                                await geocodeAddress(config.wannaToLocations[i]);
                            }
                        }
                        console.log("所有地址解析完成, config:", config);
                        // 所有地址处理完成后，开始初始化
                        init();
                    } catch (error) {
                        alert('错误：' + error.message);
                    }
                }

                // 开始处理地址
                processAddresses();
            } catch (error) {
                alert('错误：' + error.message);
            }
        }

        function init() {
            try {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('theEnd').style.height = '0';
                document.getElementById('theEnd').innerHTML = '';
                map.setMapType(BMAP_NORMAL_MAP);
                var point = new BMap.Point(MP_CEN.lng, MP_CEN.lat);
                map.centerAndZoom(point, 4);
                map.clearOverlays();
                map.reset();
                
                // 检查 MUSIC 是否存在
                if (MUSIC) {
                    MUSIC.play();
                }
                
                // 检查必要的配置
                if (!config.mainLocations.authorLocation || !config.mainLocations.authorLocation.point) {
                    throw new Error('缺少作者位置配置');
                }
                
                if (!config.mainLocations.dearLocation || !config.mainLocations.dearLocation.point) {
                    throw new Error('缺少对方位置配置');
                }
                
                if (!config.mainLocations.towMiddleLocation || !config.mainLocations.towMiddleLocation.point) {
                    throw new Error('缺少中间位置配置');
                }
                
                map.panTo(new BMap.Point(config.mainLocations.authorLocation.point.lng, config.mainLocations.authorLocation.point.lat));
                panZoom_GTC();
            } catch (error) {
                alert('错误：' + error.message);
            }
        }

        // 加载百度地图，并在加载完成后调用initMap函数
        function loadScript() {
            try {
                var script = document.createElement("script");
                callbackFuncName = "initMap";
                script.src = "https://api.map.baidu.com/api?v=3.0&ak=EXl1klVct9z0GXE7KAkPUkawwDhDN0h9&callback=" + callbackFuncName;
                script.onerror = function() {
                    alert('错误：百度地图脚本加载失败');
                };
                document.body.appendChild(script);
            } catch (error) {
                alert('错误：' + error.message);
            }
        }

        // 函数在页面加载完成后执行
        window.onload = function () {
            try {
                // 检查配置是否存在
                if (!config) {
                    throw new Error('配置文件加载失败');
                }
                
                // 检查必要的配置项
                if (!config.common || !config.common.dearName) {
                    throw new Error('缺少必要的配置项：common.dearName');
                }
                
                if (!config.mainLocations || !config.mainLocations.authorLocation || !config.mainLocations.authorLocation.point) {
                    throw new Error('缺少必要的配置项：mainLocations.authorLocation.point');
                }
                
                if (!config.mainLocations.dearLocation || !config.mainLocations.dearLocation.point) {
                    throw new Error('缺少必要的配置项：mainLocations.dearLocation.point');
                }
                
                if (!config.mainLocations.towMiddleLocation || !config.mainLocations.towMiddleLocation.point) {
                    throw new Error('缺少必要的配置项：mainLocations.towMiddleLocation.point');
                }
                
                if (!config.mainLocations.guangzhou) {
                    throw new Error('缺少必要的配置项：mainLocations.guangzhou');
                }
                
                if (!config.routeInfo) {
                    throw new Error('缺少必要的配置项：routeInfo');
                }
                
                if (!config.photos) {
                    throw new Error('缺少必要的配置项：photos');
                }
                
                if (!config.wannaToLocations) {
                    throw new Error('缺少必要的配置项：wannaToLocations');
                }
                
                if (!config.mapCenter) {
                    throw new Error('缺少必要的配置项：mapCenter');
                }
                
                if (!config.chinaCenter) {
                    throw new Error('缺少必要的配置项：chinaCenter');
                }
                
                // 检查 markerConfig
                if (typeof markerConfig === 'undefined') {
                    throw new Error('缺少 markerConfig 配置文件');
                }
                
                // 设置页面标题
                document.title = "给亲爱的" + config.common.dearName;
                
                $("#wsContent").val("送给亲爱的" + config.common.dearName +
                    "，纪念我们经历的一切，也是送给所有异地恋人的礼物「变得是距离，不变的是坚持」。 via @"
                    + config.common.authorName);
                $("#wsUrl").val(config.common.shareUrl);
                soundManager.setup({
                    url: './sm/',
                    onready: initMP3
                });
                function initMP3() {
                    MUSIC = soundManager.createSound({
                        id: 'mp3',
                        url: './LemonTree.mp3',
                        onload: function () {
                            preLoadImages(function () {
                                setTimeout(function () {
                                    var loading = document.getElementById('loading');
                                    loading.style.cursor = 'pointer';
                                    loading.innerHTML = '点击开始';
                                    loading.onclick = function () {
                                        try {
                                            screenfull && screenfull.request();
                                            loadScript();
                                        } catch (error) {
                                            alert('错误：' + error.message);
                                        }
                                    }
                                }, 3000);
                            });
                        },
                        onloaderror: function () {
                            alert('错误：音频加载失败');
                        }
                    });
                    MUSIC.load();
                }
            } catch (error) {
                alert('错误：' + error.message);
            }
        };
    </script>

    <script>
        /**
         * 百度统计代码 (需要替换)
         * 1. 访问 https://tongji.baidu.com 注册账号
         * 2. 登录后点击"管理"->"新增网站"
         * 3. 填写站点信息，获取新的跟踪代码
         * 4. 将下面的代码替换为新获取的跟踪代码
         */
        /*
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            // 替换为新的跟踪代码URL
            hm.src = "https://hm.baidu.com/hm.js?你的新跟踪代码";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
        */
    </script>

</body>

</html>